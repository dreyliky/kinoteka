<button
    *ngIf="(filmDownloadState === filmDownloadStateEnum.Undownloaded)"
    mat-stroked-button
    tabindex="3"
    [matMenuTriggerFor]="menu"
    [color]="downloadButtonColor">
    <app-icon>file_download</app-icon>
</button>

<button
    *ngIf="(filmDownloadState !== filmDownloadStateEnum.Undownloaded)"
    mat-stroked-button
    [disabled]="true">
    <ng-container [ngSwitch]="filmDownloadState">
        <app-film-download-progress
            *ngSwitchCase="filmDownloadStateEnum.Downloading"
            [film]="film">
        </app-film-download-progress>

        <app-icon
            *ngSwitchCase="filmDownloadStateEnum.Downloaded">
            check
        </app-icon>
    </ng-container>
</button>

<mat-menu
    #menu="matMenu"
    [xPosition]="'before'">
    <ng-container *ngIf="(mediaFiles$ | async) as mediaFiles; else loaderTemplate">
        <button
            *ngFor="let media of mediaFiles"
            mat-menu-item
            (click)="onDownloadButtonClick()">
            <span>{{ media.translationName }}</span>
        </button>
    </ng-container>
    
    <ng-template #loaderTemplate>
        <mat-spinner></mat-spinner>
    </ng-template>
</mat-menu>
